function json_check(e){if(!e)return"❌ JSON 데이터가 없습니다.";let t;try{t=JSON.parse(e)}catch(e){return"❌ JSON 파싱 실패: "+e.message}return"object"!=typeof t||null===t||Array.isArray(t)?"❌ JSON 데이터가 객체(Object)가 아닙니다.":t}function video_generate(){const e=$("#youtube_url").val();if(!e)return void alert("유투브 URL을 입력해주세요.");let t=null;const n=new URL(e);if(n.hostname.includes("youtu.be"))t=n.pathname.slice(1);else{if(!n.hostname.includes("youtube.com")||!n.searchParams.get("v"))return void alert("유투브 URL이 올바르지 않습니다. (ex: https://youtu.be/...)");t=n.searchParams.get("v")}const r=document.getElementById("json_file"),o=$('details[name="tab-pane"]'),s=o.index(o.filter("[open]"));if(0===s){const e=r.files[0];if(!e)return void alert("유투브 화면해설용 JSON 파일을 선택해주세요.");const n=new FileReader;n.onload=e=>{const n=json_check(e.target.result);if("string"!=typeof n)try{window.sessionStorage.setItem("json_data",JSON.stringify(n)),window.location.href=`/tools/ytb-player/?id=${t}`}catch(e){return void alert("세션 저장 실패: "+e.message)}else alert(n)},n.readAsText(e)}else if(1===s){const e=json_check($("#json_code").val().trim());if("string"==typeof e)return void alert(e);try{window.sessionStorage.setItem("json_data",JSON.stringify(e)),window.location.href=`/tools/ytb-player/?id=${t}`}catch(e){return void alert("세션 저장 실패: "+e.message)}}}$((function(){$("#create-video").click(video_generate)}));